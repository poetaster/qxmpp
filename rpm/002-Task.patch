diff --git a/src/base/QXmppTask.h b/src/base/QXmppTask.h
index 84ba8a33..5a986f91 100644
--- a/src/base/QXmppTask.h
+++ b/src/base/QXmppTask.h
@@ -18,7 +18,8 @@
 template<typename T>
 class QXmppPromise;
 
-namespace QXmpp::Private {
+namespace QXmpp {
+    namespace Private {
 
 struct TaskData;
 
@@ -43,7 +44,8 @@ private:
     std::shared_ptr<TaskData> d;
 };
 
-}  // namespace QXmpp::Private
+}  // namespace QXmpp
+}  // namespace Private
 
 ///
 /// Handle for an ongoing operation that finishes in the future.
